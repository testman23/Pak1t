<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Wealth & Purchasing Power Suite</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .app {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .header {
      padding: 28px;
      text-align: center;
      color: white;
      background: linear-gradient(135deg, #2c3e50, #34495e);
    }
    .header h1 { margin: 0 0 6px 0; font-size: 2.2em; }
    .tabs {
      display: flex; gap: 10px; padding: 14px 18px; background: #fff; border-bottom: 1px solid #eee; flex-wrap: wrap;
    }
    .tab {
      padding: 10px 16px; border-radius: 999px; border: 1px solid #e1e8ed; background: #f8f9ff;
      cursor: pointer; font-weight: 700; color: #374151;
    }
    .tab.active { background: linear-gradient(135deg,#667eea,#764ba2); color: #fff; border-color: #667eea; }
    .section { display: none; padding: 24px; background: #fff; }
    .section.active { display: block; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(260px,1fr)); gap: 16px; }
    .input-group { display: flex; flex-direction: column; }
    .input-group label { font-weight: 600; margin-bottom: 6px; color: #2c3e50; }
    .input-group input, .input-group select {
      padding: 12px 14px; border: 2px solid #e1e8ed; border-radius: 10px; font-size: 16px; background: white;
    }
    .input-group input:focus, .input-group select:focus {
      outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102,126,234,.1);
    }
    .btn {
      background: linear-gradient(135deg,#667eea,#764ba2); color: #fff; border: none; padding: 12px 28px;
      border-radius: 999px; font-size: 1.05em; font-weight: 800; cursor: pointer; box-shadow: 0 4px 15px rgba(102,126,234,.3);
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(102,126,234,.4); }
    .results { padding-top: 12px; display: grid; grid-template-columns: repeat(auto-fit,minmax(340px,1fr)); gap: 18px; }
    .card {
      background: white; border-radius: 14px; padding: 18px; border: 1px solid #f0f0f0; box-shadow: 0 8px 25px rgba(0,0,0,.06);
    }
    .card h3 { font-size: 1.1em; margin-bottom: 10px; color: #2c3e50; border-bottom: 2px solid #667eea; padding-bottom: 8px; }
    .key {
      background: linear-gradient(135deg,#667eea,#764ba2); color: white; padding: 16px; border-radius: 12px; text-align: center; margin: 10px 0;
    }
    .amt { font-size: 1.8em; font-weight: 900; }
    .row { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #f6f6f6; }
    .row:last-child { border-bottom: 0; }
    .l { color: #666; font-weight: 700; }
    .r { color: #111827; font-weight: 800; }
    .badge { display:inline-block; padding:4px 10px; border-radius:999px; font-weight:700; font-size:.8em; background:#eef2ff; color:#3730a3; }
    .note { font-size: .9em; color: #666; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <h1>Wealth & Purchasing Power Suite</h1>
      <div style="opacity:.9">Side-by-side tools: Purchasing Power and Net Worth vs US GDP</div>
    </div>

    <div class="tabs">
      <button class="tab active" data-target="#pp">Purchasing Power</button>
      <button class="tab" data-target="#gdp">Net Worth vs US GDP</button>
    </div>

    <!-- Purchasing Power tab -->
    <section id="pp" class="section active">
      <div class="grid">
        <div class="input-group">
          <label for="pp_amount">Amount ($)</label>
          <input type="number" id="pp_amount" placeholder="e.g., 100" step="0.01" min="0.01" value="100">
        </div>
        <div class="input-group">
          <label for="pp_from">From Year</label>
          <input type="number" id="pp_from" placeholder="1850-2025" min="1800" max="2025" value="1870">
        </div>
        <div class="input-group">
          <label for="pp_to">To Year</label>
          <input type="number" id="pp_to" placeholder="Target year" min="1800" max="2030" value="2025">
        </div>
        <div class="input-group">
          <label for="pp_analysis">Analysis Type</label>
          <select id="pp_analysis">
            <option value="basic">Basic Purchasing Power</option>
            <option value="comprehensive">Comprehensive Analysis</option>
            <option value="wage">Wage vs Price Comparison</option>
          </select>
        </div>
      </div>

      <div id="pp_wage" style="display:none; margin-top: 12px;">
        <div class="grid">
          <div class="input-group">
            <label for="pp_item_price">Item Price ($)</label>
            <input type="number" id="pp_item_price" placeholder="e.g., 0.05" step="0.01" min="0.01" value="0.05">
          </div>
          <div class="input-group">
            <label for="pp_item_year">Item Price Year</label>
            <input type="number" id="pp_item_year" placeholder="e.g., 1880" min="1800" max="2025" value="1880">
          </div>
        </div>
      </div>

      <div style="margin-top:14px;"><button class="btn" id="pp_calc">Calculate Purchasing Power</button></div>
      <div class="results" id="pp_results"></div>
    </section>

    <!-- Net Worth vs GDP tab -->
    <section id="gdp" class="section">
      <div id="gdp_status" class="badge" style="margin-bottom:10px;">Loading latest U.S. GDP…</div>
      <div class="grid">
        <div class="input-group">
          <label for="nw_amount">Net Worth ($)</label>
          <input type="number" id="nw_amount" placeholder="e.g., 100000" min="0" step="0.01">
        </div>
        <div class="input-group">
          <label for="nw_year">Year (1850–2024)</label>
          <input type="number" id="nw_year" placeholder="e.g., 1947" min="1850" max="2024">
        </div>
      </div>
      <div style="margin-top:14px;"><button class="btn" id="nw_calc">Calculate Percentage</button></div>
      <div class="results" id="nw_results"></div>
      <div class="note">Sources: 1850–1929 GDP from Johnston–Williamson (MeasuringWorth). 1929–2024 from BEA.</div>
    </section>
  </div>

<script>
// --- Tab switching ---
document.querySelectorAll('.tab').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    const target = btn.getAttribute('data-target');
    document.querySelector(target).classList.add('active');
  });
});

// --- Purchasing Power logic (from original) ---
// CPI-like index dataset (from your original)
const historicalPriceIndices = {
  1850:100.0,1851:102.1,1852:98.9,1853:106.4,1854:111.7,1855:110.6,1856:105.3,1857:111.7,1858:102.1,1859:104.3,1860:106.4,
  1861:110.6,1862:125.5,1863:151.1,1864:185.1,1865:191.5,1866:174.5,1867:159.6,1868:156.4,1869:148.9,1870:140.4,1871:133.0,
  1872:138.3,1873:134.0,1874:127.7,1875:118.1,1876:110.6,1877:106.4,1878:98.9,1879:100.0,1880:106.4,1881:108.5,1882:114.9,
  1883:110.6,1884:104.3,1885:100.0,1886:95.7,1887:98.9,1888:100.0,1889:100.0,1890:98.9,1891:98.9,1892:95.7,1893:97.9,1894:89.4,
  1895:85.1,1896:85.1,1897:85.1,1898:87.2,1899:87.2,1900:89.4,1901:91.5,1902:95.7,1903:97.9,1904:97.9,1905:95.7,1906:97.9,
  1907:102.1,1908:97.9,1909:95.7,1910:100.0,1911:100.0,1912:104.3,1913:106.4,1914:108.5,1915:110.6,1916:120.2,1917:138.3,
  1918:162.8,1919:185.1,1920:212.8,1921:191.5,1922:179.8,1923:183.0,1924:183.0,1925:187.2,1926:189.4,1927:186.2,1928:183.0,
  1929:183.0,1930:177.7,1931:161.7,1932:145.7,1933:138.3,1934:144.7,1935:148.9,1936:149.9,1937:155.3,1938:151.1,1939:148.9,
  1940:151.1,1941:159.6,1942:177.7,1943:191.5,1944:194.7,1945:197.9,1946:212.8,1947:244.7,1948:265.9,1949:261.7,1950:266.9,
  1951:287.2,1952:292.6,1953:296.8,1954:298.9,1955:298.9,1956:304.3,1957:314.9,1958:323.4,1959:326.6,1960:331.9,1961:335.1,
  1962:340.4,1963:344.7,1964:351.1,1965:357.4,1966:368.1,1967:378.7,1968:394.7,1969:417.0,1970:442.6,1971:462.8,1972:478.7,
  1973:508.5,1974:563.8,1975:617.0,1976:651.1,1977:693.6,1978:748.9,1979:831.9,1980:936.2,1981:1031.9,1982:1095.7,1983:1127.7,
  1984:1174.5,1985:1212.8,1986:1234.0,1987:1276.6,1988:1329.8,1989:1391.5,1990:1468.1,1991:1531.9,1992:1574.5,1993:1617.0,
  1994:1659.6,1995:1706.4,1996:1757.4,1997:1795.7,1998:1808.5,1999:1851.1,2000:1936.2,2001:1991.5,2002:2021.3,2003:2063.8,
  2004:2123.4,2005:2191.9,2006:2265.9,2007:2332.0,2008:2404.3,2009:2340.4,2010:2382.9,2011:2489.4,2012:2553.2,2013:2591.5,
  2014:2617.0,2015:2617.0,2016:2648.9,2017:2702.1,2018:2774.5,2019:2831.9,2020:2872.3,2021:3021.3,2022:3255.3,2023:3412.8,
  2024:3502.1,2025:3580.0
};

const categoryMultipliers = {"Food":0.8,"Housing":1.3,"Transportation":1.2,"Healthcare":2.0,"Education":1.8,"Technology":0.1,"Clothing":0.6};

document.getElementById('pp_analysis').addEventListener('change', e => {
  document.getElementById('pp_wage').style.display = e.target.value === 'wage' ? 'block' : 'none';
});

function getPriceIndex(year){
  if(historicalPriceIndices[year]) return historicalPriceIndices[year];
  const years = Object.keys(historicalPriceIndices).map(Number).sort((a,b)=>a-b);
  if(year < years[0]) return historicalPriceIndices[years[0]];
  if(year > years[years.length-1]) return historicalPriceIndices[years[years.length-1]];
  for(let i=0;i<years.length-1;i++){
    if(years[i] <= year && year <= years[i+1]){
      const x1=years[i], y1=historicalPriceIndices[x1];
      const x2=years[i+1], y2=historicalPriceIndices[x2];
      return y1 + (y2 - y1) * (year - x1) / (x2 - x1);
    }
  }
}

function getEra(year){
  if(year < 1870) return "Pre-Industrial";
  if(year < 1900) return "Industrial Revolution";
  if(year < 1930) return "Early 20th Century";
  if(year < 1950) return "Great Depression/WWII";
  if(year < 1980) return "Post-War Boom";
  if(year < 2000) return "Late 20th Century";
  if(year < 2020) return "Early 21st Century";
  return "Modern Era";
}

function conf(year){
  if (year >= 1950) return { level: "High", class: "badge", desc: "Official statistics"};
  if (year >= 1913) return { level: "Good", class: "badge", desc: "Fed-era"};
  if (year >= 1870) return { level: "Moderate", class: "badge", desc: "Academic estimates"};
  return { level: "Low", class: "badge", desc: "Limited sources"};
}

function calcPP(amount, fromYear, toYear){
  const fromIdx = getPriceIndex(fromYear);
  const toIdx = getPriceIndex(toYear);
  const factor = toIdx / fromIdx;
  const adjusted = amount * factor;
  const years = toYear - fromYear;
  const annual = years>0 ? (Math.pow(factor,1/years)-1)*100 : 0;
  return { amount, adjusted, factor, totalInfl:(factor-1)*100, annual, fromYear, toYear, era:`${getEra(fromYear)} → ${getEra(toYear)}`, conf: conf(fromYear) };
}

function catAnalysis(factor){
  const out = {};
  for(const [k,m] of Object.entries(categoryMultipliers)){
    const cf = factor * m;
    out[k] = { f: cf, delta: ((cf - factor)/factor)*100 };
  }
  return out;
}

function multi(amount, baseYear){
  const yrs = [1870,1900,1930,1950,1980,2000,2025];
  return yrs.filter(y=>y!==baseYear).map(y=>{
    const r = calcPP(amount, baseYear, y);
    return { toYear:y, adjusted:r.adjusted, era:getEra(y), factor:r.factor };
  });
}

function wageVs(wage,wYear,price,pYear,target){
  const w = calcPP(wage,wYear,target);
  const p = calcPP(price,pYear,target);
  const hist = wage/price;
  const modern = w.adjusted / p.adjusted;
  const change = ((modern - hist)/hist)*100;
  return {w, p, hist, modern, change, interp: change>0 ? "More affordable" : "Less affordable"};
}

document.getElementById('pp_calc').addEventListener('click', ()=>{
  const amt = parseFloat(document.getElementById('pp_amount').value);
  const fy = parseInt(document.getElementById('pp_from').value);
  const ty = parseInt(document.getElementById('pp_to').value) || 2025;
  const type = document.getElementById('pp_analysis').value;
  const out = document.getElementById('pp_results');
  out.innerHTML = '';
  if(!(amt>0) || !(fy>=1800 && fy<=2025) || !(ty>=fy && ty<=2030)){
    out.innerHTML = '<div class="card"><b>Error:</b> Check inputs.</div>'; return;
  }

  if(type==='basic' || type==='comprehensive'){
    const r = calcPP(amt, fy, ty);
    const cats = catAnalysis(r.factor);
    let html = `
      <div class="card">
        <h3>Purchasing Power</h3>
        <div class="key"><div class="amt">$${r.adjusted.toLocaleString('en-US',{maximumFractionDigits:2})}</div><div>Equivalent in ${ty}</div></div>
        <div class="row"><span class="l">Inflation Factor</span><span class="r">${r.factor.toFixed(2)}×</span></div>
        <div class="row"><span class="l">Total Inflation</span><span class="r">${r.totalInfl.toFixed(1)}%</span></div>
        <div class="row"><span class="l">Annual Rate</span><span class="r">${r.annual.toFixed(2)}%</span></div>
        <div class="row"><span class="l">Era Transition</span><span class="r">${r.era}</span></div>
        <div class="row"><span class="l">Confidence</span><span class="r">${r.conf.level} (${r.conf.desc})</span></div>
      </div>
      <div class="card">
        <h3>Category Tilt</h3>
        ${Object.entries(cats).map(([k,v])=>`
          <div class="row"><span class="l">${k}</span><span class="r">${v.f.toFixed(2)}× (${v.delta>0?'+':''}${v.delta.toFixed(1)}%)</span></div>
        `).join('')}
      </div>
    `;
    if(type==='comprehensive'){
      const m = multi(amt, fy);
      html += `
        <div class="card">
          <h3>Multi-Era Comparison</h3>
          ${m.map(x=>`
            <div class="row"><span class="l">${x.toYear} — ${x.era}</span><span class="r">$${x.adjusted.toLocaleString('en-US',{maximumFractionDigits:2})} (${x.factor.toFixed(2)}×)</span></div>
          `).join('')}
        </div>`;
    }
    out.innerHTML = html;
  } else {
    const ip = parseFloat(document.getElementById('pp_item_price').value);
    const iy = parseInt(document.getElementById('pp_item_year').value);
    if(!(ip>0) || !(iy>=1800 && iy<=2025)){ out.innerHTML = '<div class="card"><b>Error:</b> Check wage/price inputs.</div>'; return; }
    const res = wageVs(amt, fy, ip, iy, ty);
    out.innerHTML = `
      <div class="card">
        <h3>Wage Analysis</h3>
        <div class="key"><div class="amt">$${res.w.adjusted.toLocaleString('en-US',{maximumFractionDigits:2})}</div><div>Modern wage equivalent</div></div>
        <div class="row"><span class="l">Historical Wage</span><span class="r">$${amt.toLocaleString()}</span></div>
        <div class="row"><span class="l">Wage Inflation</span><span class="r">${res.w.totalInfl.toFixed(1)}%</span></div>
      </div>
      <div class="card">
        <h3>Price Analysis</h3>
        <div class="key"><div class="amt">$${res.p.adjusted.toLocaleString('en-US',{maximumFractionDigits:2})}</div><div>Modern price equivalent</div></div>
        <div class="row"><span class="l">Historical Price</span><span class="r">$${ip.toLocaleString()}</span></div>
        <div class="row"><span class="l">Price Inflation</span><span class="r">${res.p.totalInfl.toFixed(1)}%</span></div>
      </div>
      <div class="card">
        <h3>Affordability</h3>
        <div class="key"><div class="amt">${res.change>0?'+':''}${res.change.toFixed(1)}%</div><div>${res.interp} today</div></div>
        <div class="row"><span class="l">Historical Ratio</span><span class="r">${res.hist.toFixed(2)} units per wage</span></div>
        <div class="row"><span class="l">Modern Ratio</span><span class="r">${res.modern.toFixed(2)} units per wage</span></div>
      </div>`;
  }
});

// --- Net Worth vs GDP logic ---
// Historical US GDP (billions) from your GDP tool
const gdpData = {
  1850: 2.66,1851: 2.80,1852: 3.14,1853: 3.38,1854: 3.79,1855: 4.05,1856: 4.10,1857: 4.25,1858: 4.04,1859: 4.36,1860: 4.39,1861: 4.34,1862: 4.64,1863: 5.59,1864: 6.17,1865: 6.63,1866: 6.97,1867: 7.05,1868: 7.25,1869: 7.62,
  1870: 7.66,1871: 8.02,1872: 8.64,1873: 9.11,1874: 8.95,1875: 8.87,1876: 8.88,1877: 9.16,1878: 9.01,1879: 9.50,1880: 11.59,1881: 12.07,1882: 13.16,1883: 13.86,1884: 13.98,1885: 13.85,1886: 14.48,1887: 15.25,1888: 15.38,1889: 16.48,
  1890: 17.51,1891: 18.04,1892: 19.24,1893: 18.25,1894: 17.43,1895: 19.02,1896: 18.10,1897: 19.41,1898: 20.55,1899: 22.76,1900: 24.71,1901: 27.19,1902: 28.49,1903: 30.14,1904: 30.36,1905: 33.68,1906: 37.67,1907: 39.73,1908: 36.50,1909: 40.68,
  1910: 43.62,1911: 44.45,1912: 48.42,1913: 50.62,1914: 49.93,1915: 50.15,1916: 59.75,1917: 69.16,1918: 76.43,1919: 84.27,1920: 91.52,1921: 69.65,1922: 74.10,1923: 85.41,1924: 87.63,1925: 93.13,1926: 97.73,1927: 96.33,1928: 98.54,1929: 104.61,
  1930: 92.19,1931: 77.37,1932: 59.52,1933: 57.20,1934: 66.79,1935: 74.24,1936: 84.85,1937: 92.95,1938: 87.38,1939: 93.45,1940: 102.89,1941: 129.43,1942: 166.00,1943: 203.13,1944: 224.61,1945: 228.18,1946: 222.30,1947: 244.20,1948: 269.20,1949: 267.30,
  1950: 293.80,1951: 339.30,1952: 358.30,1953: 379.40,1954: 380.40,1955: 414.80,1956: 437.50,1957: 461.10,1958: 467.20,1959: 506.60,1960: 526.40,1961: 544.70,1962: 585.60,1963: 617.70,1964: 663.60,1965: 719.10,1966: 787.80,1967: 832.60,1968: 910.00,1969: 984.60,
  1970: 1075.90,1971: 1167.80,1972: 1282.40,1973: 1428.50,1974: 1549.20,1975: 1688.90,1976: 1877.60,1977: 2086.00,1978: 2356.60,1979: 2632.10,1980: 2862.50,1981: 3211.00,1982: 3345.00,1983: 3638.10,1984: 4040.70,1985: 4346.70,1986: 4590.20,1987: 4870.20,1988: 5252.60,1989: 5657.70,
  1990: 5963.10,1991: 6158.10,1992: 6520.30,1993: 6858.60,1994: 7287.20,1995: 7664.10,1996: 8100.20,1997: 8608.50,1998: 9089.20,1999: 9660.60,2000: 10252.30,2001: 10621.80,2002: 11142.10,2003: 11853.30,2004: 12623.00,2005: 13377.20,2006: 14028.70,2007: 14477.60,2008: 14718.60,2009: 14418.70,
  2010: 14992.10,2011: 15542.60,2012: 16197.00,2013: 16784.90,2014: 17521.70,2015: 18224.80,2016: 18715.00,2017: 19485.40,2018: 20527.20,2019: 21372.60,2020: 20953.00,2021: 23315.10,2022: 25462.70,2023: 26854.60,2024: 28269.00
};

let LATEST_US_GDP = null; // {year, value} nominal US$

// fetch latest GDP on load (World Bank)
async function fetchLatestUSGDP(){
  try{
    const resp = await fetch('https://api.worldbank.org/v2/country/US/indicator/NY.GDP.MKTP.CD?format=json');
    if(!resp.ok) throw new Error('HTTP '+resp.status);
    const data = await resp.json();
    const series = data[1] || [];
    const latest = series.find(d => d.value !== null);
    const badge = document.getElementById('gdp_status');
    if(latest){
      LATEST_US_GDP = { year: latest.date, value: latest.value };
      if(badge){ badge.textContent = `Latest U.S. GDP (nominal): $${LATEST_US_GDP.value.toLocaleString('en-US',{maximumFractionDigits:0})} (${LATEST_US_GDP.year})`; }
    }else{
      if(badge){ badge.textContent = 'Latest U.S. GDP unavailable.'; }
    }
  }catch(e){
    const badge = document.getElementById('gdp_status');
    if(badge){ badge.textContent = 'Error fetching U.S. GDP.'; }
    console.error(e);
  }
}
window.addEventListener('load', fetchLatestUSGDP);

function addModernConversionUI(container, percentShare){
  const btn = document.createElement('button');
  btn.className = 'btn';
  btn.style.marginTop = '10px';
  btn.textContent = 'Convert this share to Modern $';
  btn.addEventListener('click', ()=>{
    if(!LATEST_US_GDP){ alert('Latest U.S. GDP not loaded yet.'); return; }
    const fraction = percentShare / 100.0;
    const modern = fraction * LATEST_US_GDP.value;
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <h3>GDP Share → Modern Dollars</h3>
      <div class="key"><div class="amt">$${modern.toLocaleString('en-US',{maximumFractionDigits:0})}</div>
      <div>Equivalent at ${(percentShare).toFixed(7)}% of U.S. GDP</div></div>
      <div class="row"><span class="l">GDP Year</span><span class="r">${LATEST_US_GDP.year}</span></div>
      <div class="row"><span class="l">GDP (nominal)</span><span class="r">$${LATEST_US_GDP.value.toLocaleString('en-US',{maximumFractionDigits:0})}</span></div>
    `;
    container.appendChild(card);
  });
  container.appendChild(btn);
}

document.getElementById('nw_calc').addEventListener('click', ()=>{
  const amt = parseFloat(document.getElementById('nw_amount').value);
  const y = parseInt(document.getElementById('nw_year').value);
  const out = document.getElementById('nw_results');
  out.innerHTML = '';
  if(!(amt>=0)){ out.innerHTML = '<div class="card"><b>Error:</b> Enter a valid net worth.</div>'; return; }
  if(!(y>=1850 && y<=2024)){ out.innerHTML = '<div class="card"><b>Error:</b> Enter a year 1850–2024.</div>'; return; }
  if(!(y in gdpData)){ out.innerHTML = '<div class="card"><b>Error:</b> No GDP for that year.</div>'; return; }

  const gdp = gdpData[y] * 1_000_000_000;
  const pct = (amt / gdp) * 100;

  const card = document.createElement('div');
  card.className = 'card';
  card.innerHTML = `
    <h3>Calculation Result</h3>
    <div class="row"><span class="l">Net Worth</span><span class="r">$${amt.toLocaleString('en-US',{maximumFractionDigits:2})}</span></div>
    <div class="row"><span class="l">US GDP in ${y}</span><span class="r">$${gdpData[y].toLocaleString('en-US',{maximumFractionDigits:1})} billion</span></div>
    <div class="key"><div class="amt">${pct.toExponential(3)}%</div><div>(${pct.toFixed(7)}% of GDP)</div></div>
    <div class="note">That is about 1 in ${(1/(pct/100)).toFixed(0).toLocaleString()} parts of GDP.</div>
  `;
  out.appendChild(card);
  addModernConversionUI(out, pct);
});
</script>
</body>
</html>
